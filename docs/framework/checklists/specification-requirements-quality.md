# 規格需求品質檢查清單

**主題**: 規格層級需求品質驗證  
**版本**: 1.0.0  
**日期**: 2025-12-02  
**語言**: 繁體中文 (zh-TW)  
**狀態**: 已建立  
**來源**: Session 6 規格澄清工作坊

---

## 檢查清單概述

本清單是**需求文字的單元測試**，用於驗證規格文檔的**完整性、清晰度、一致性、可測量性**，而**非**驗證實現是否正確。

### 核心原則

✅ **測試內容**: 需求本身的品質  
✅ **問題模式**: 「是否……定義？」「是否……量化？」「是否一致？」  
✅ **關注點**: 規格的可讀性、可追蹤性、可驗證性  

❌ **不測試**: 代碼實現、系統行為、測試結果  
❌ **不包含**: 實現驗證、功能測試、集成測試  

---

## 澄清工作坊決策回顧

本檢查清單基於以下 4 個核心澄清決策：

| 澄清 | 決策 | 適用層級 |
|------|------|---------|
| Q1 | 核心安全目標: Power + Clock + Memory | SG (安全目標) |
| Q2 | HW/SW 分配: HW 檢測 + 預設 + SW 管理 | SysReq/TSR |
| Q3 | 驗證覆蓋率: SC=100%, BC=100%, DC>90% | SSR (軟體) |
| Q4 | ASIL 降級: 獨立故障 + DC>90% | TSR 評估 |

---

## 檢查清單組織

本清單分為 **8 個類別**，共 **52 個檢查項目**：

1. [需求完整性](#需求完整性) - 10 項
2. [需求清晰度](#需求清晰度) - 9 項
3. [需求一致性](#需求一致性) - 8 項
4. [驗收標準品質](#驗收標準品質) - 7 項
5. [情境覆蓋](#情境覆蓋) - 6 項
6. [邊界條件](#邊界條件) - 6 項
7. [非功能性需求](#非功能性需求) - 6 項

---

## 需求完整性

*關注點: 是否遺漏了必要的需求層級或重要的功能？*

### SG (安全目標) 層級

- [ ] **CHK001** - SG 層級是否定義了 3 個核心安全目標（電源、時鐘、記憶體）？ [Completeness, Spec §SG]
- [ ] **CHK002** - 每個 SG 是否都有明確的編號和標題？ [Completeness]
- [ ] **CHK003** - SG 是否都對應相應的 FSR？ [Coverage]
- [ ] **CHK004** - 是否遺漏了其他關鍵安全目標（溫度、過電流等）？ [Gap Analysis]

### FSR (功能安全需求) 層級

- [ ] **CHK005** - 每個 FSR 是否都有明確的來源 SG？ [Traceability, Spec §FSR]
- [ ] **CHK006** - FSR 是否都分配了對應的 TSR？ [Coverage]
- [ ] **CHK007** - 是否定義了所有功能路徑的 FSR（正常、故障、恢復）？ [Completeness]

### TSR (技術安全需求) 層級

- [ ] **CHK008** - 是否所有 FSR 都分解為至少一個 TSR？ [Coverage]
- [ ] **CHK009** - 是否缺少硬體故障檢測的 TSR？ [Gap, Q2 決策驗證]
- [ ] **CHK010** - 是否缺少軟體故障管理的 TSR？ [Gap, Q2 決策驗證]

---

## 需求清晰度

*關注點: 需求陳述是否明確無歧義？是否使用了模糊詞彙？*

### 語言明確性

- [ ] **CHK011** - 所有需求是否使用了規範性語言（MUST, SHALL, SHOULD）？ [Clarity, Spec §FSR]
- [ ] **CHK012** - 是否存在模糊詞彙如「適當」「合理」「快速」「高效」？ [Ambiguity Detection]
- [ ] **CHK013** - 「電源保護」「時鐘監控」「記憶體保護」在需求中是否具體定義？ [Clarity, Q1 決策驗證]

### 量化標準

- [ ] **CHK014** - VDD 監控的電壓閾值是否明確定義（如 2.7V ±50mV）？ [Clarity, Quantification]
- [ ] **CHK015** - 時間指標是否量化（如 < 1μs 硬體延遲、< 5ms 軟體反應）？ [Clarity, Quantification]
- [ ] **CHK016** - 覆蓋率指標是否明確定義（SC=100%, BC=100%, DC>90%）？ [Clarity, Q3 決策驗證]
- [ ] **CHK017** - ASIL 等級是否在每個需求中明確陳述？ [Clarity, Spec §TSR]
- [ ] **CHK018** - 診斷覆蓋率目標是否明確為「> 90%」而非「足夠高」？ [Clarity, Q3 決策驗證]

### 邊界條件

- [ ] **CHK019** - 工作溫度範圍是否明確定義（0-85°C）？ [Clarity, Spec §Boundary]

---

## 需求一致性

*關注點: 不同層級或不同需求之間是否存在矛盾？*

### 層級間一致性

- [ ] **CHK020** - FSR 的 ASIL 級別是否等於或高於對應的 SG？ [Consistency, ASIL Hierarchy]
- [ ] **CHK021** - TSR 的 ASIL 級別是否 ≥ FSR 的 ASIL 級別？ [Consistency, ASIL Hierarchy]
- [ ] **CHK022** - HSR/SSR 的 ASIL 級別是否 ≥ 對應 TSR 的 ASIL 級別？ [Consistency, ASIL Hierarchy]

### HW/SW 分配一致性

- [ ] **CHK023** - HW 責任定義是否與 Q2 決策一致（檢測 + 安全預設）？ [Consistency, Q2 決策驗證]
- [ ] **CHK024** - SW 責任定義是否與 Q2 決策一致（管理 + 恢復）？ [Consistency, Q2 決策驗證]
- [ ] **CHK025** - HW/SW 介面定義是否在 TSR 中明確且一致？ [Consistency, Interface Definition]

### 驗證方法一致性

- [ ] **CHK026** - 相同功能的需求是否採用一致的驗證方法？ [Consistency, Verification Alignment]
- [ ] **CHK027** - ASIL-B 需求是否都使用了相同級別的驗證嚴格度？ [Consistency, ASIL-B Verification]

---

## 驗收標準品質

*關注點: 驗收標準是否可客觀判定？是否包含測試條件？*

### 驗收標準定義

- [ ] **CHK028** - 每個 TSR 是否都定義了明確的驗收標準？ [Acceptability, Spec §TSR]
- [ ] **CHK029** - 驗收標準是否包含通過/失敗的客觀判定條件？ [Measurability]
- [ ] **CHK030** - VDD 監控是否定義了測試條件（如「VDD 從 3.3V 逐步降至 2.65V」）？ [Test Condition Specificity]

### 測試條件

- [ ] **CHK031** - 時序測試是否明確定義了測試環境（溫度、電源變化速率）？ [Test Condition, Spec §Boundary]
- [ ] **CHK032** - 覆蓋率驗收是否明確定義了工具和閾值？ [Test Condition, Q3 決策驗證]
- [ ] **CHK033** - 診斷覆蓋率測試是否明確定義了故障注入方法？ [Test Condition, DC Verification]
- [ ] **CHK034** - 所有驗收標準是否都包含容差範圍（如 ±10%, ±50mV）？ [Test Tolerance]

---

## 情境覆蓋

*關注點: 是否定義了所有關鍵情境（正常、故障、恢復）的需求？*

### 故障情境

- [ ] **CHK035** - 是否為所有核心故障模式定義了需求（電源低、時鐘停止、位元翻轉）？ [Coverage, Fault Scenarios]
- [ ] **CHK036** - 是否定義了硬體故障檢測的需求？ [Coverage, Q2 決策驗證]
- [ ] **CHK037** - 是否定義了軟體故障管理的需求？ [Coverage, Q2 決策驗證]

### 恢復情境

- [ ] **CHK038** - 是否定義了故障恢復流程的需求？ [Coverage, Recovery Flow]
- [ ] **CHK039** - 是否定義了故障安全狀態的保持需求？ [Coverage, Safe State]

### 極限情況

- [ ] **CHK040** - 是否定義了零資料情況下的安全需求？ [Coverage, Edge Case]

---

## 邊界條件

*關注點: 邊界值、操作範圍是否明確定義？*

### 電氣邊界

- [ ] **CHK041** - VDD 工作範圍是否明確（3.3V ± 5%）？ [Boundary Specification]
- [ ] **CHK042** - 故障檢測電壓閾值是否定義（2.7V ±50mV）？ [Boundary Specification]

### 時序邊界

- [ ] **CHK043** - 硬體檢測延遲是否有明確上限（< 1μs）？ [Boundary Specification, Q2 決策驗證]
- [ ] **CHK044** - 軟體反應時間是否有明確上限（< 5ms）？ [Boundary Specification, Q2 決策驗證]

### 環境邊界

- [ ] **CHK045** - 工作溫度範圍是否明確？ [Boundary Specification]
- [ ] **CHK046** - 是否定義了邊界外的系統行為？ [Boundary Coverage]

---

## 非功能性需求

*關注點: 是否定義了性能、可靠性、安全性等非功能需求？*

### 性能需求

- [ ] **CHK047** - 診斷覆蓋率 (DC) 是否明確定義為「> 90%」？ [NFR Quality, Q3 決策驗證]
- [ ] **CHK048** - 代碼複雜度是否有限制（如 CC ≤ 15）？ [NFR Quality]

### 可靠性需求

- [ ] **CHK049** - 是否定義了故障檢測可靠性指標？ [NFR Quality, Reliability]
- [ ] **CHK050** - 是否定義了故障誤報率限制？ [NFR Quality, False Positive Rate]

### 可維護性需求

- [ ] **CHK051** - MISRA C 合規性是否明確指定（零關鍵違規）？ [NFR Quality, Code Maintainability]
- [ ] **CHK052** - 代碼文檔化要求是否明確？ [NFR Quality, Documentation]

---

## 檢查表使用指南

### 檢查流程

1. **準備階段** (15 分鐘)
   - 收集最新規格文檔（SPECIFICATION-REQUIREMENTS-CLARIFICATION.md v1.1.0）
   - 準備需求追蹤矩陣
   - 收集澄清工作坊結果

2. **檢查階段** (60 分鐘)
   - 按類別系統檢查
   - 在「未通過」項目旁標記具體缺陷
   - 記錄缺陷位置和建議改進

3. **分析階段** (15 分鐘)
   - 統計通過/未通過項目
   - 識別優先級最高的缺陷
   - 生成改進建議清單

### 通過/失敗判定

**通過 (✓)**: 需求文字中清晰陳述了該項內容  
**未通過 (✗)**: 需求文字中缺少該項內容或表述不清  
**部分** (◐): 某些需求滿足，某些未滿足（標記比例，如 ◐ 7/10）

### 優先級排序

**Critical (紅)**: CHK001-CHK010（完整性）, CHK023-CHK025（HW/SW 一致性）  
**High (橙)**: CHK011-CHK019（清晰度）, CHK028-CHK034（驗收標準）  
**Medium (黃)**: CHK020-CHK027（一致性）, CHK035-CHK046（情境/邊界）  
**Low (綠)**: CHK047-CHK052（非功能需求）

---

## 檢查結果記錄模板

```
檢查日期: [YYYY-MM-DD]
檢查者: [名稱]
規格版本: [v.x.y]
總項目數: 52
通過: [N]
失敗: [N]
部分: [N]
通過率: [%]

優先級分佈:
- Critical: [N] 通過 / [N] 失敗
- High: [N] 通過 / [N] 失敗
- Medium: [N] 通過 / [N] 失敗
- Low: [N] 通過 / [N] 失敗

關鍵缺陷 (頻率 ≥ 3 次):
1. [缺陷描述] - [受影響項目計數]
2. [缺陷描述] - [受影響項目計數]
3. [缺陷描述] - [受影響項目計數]

建議改進 (優先級排序):
1. [改進建議] - 預計受益項目數: [N]
2. [改進建議] - 預計受益項目數: [N]
3. [改進建議] - 預計受益項目數: [N]
```

---

## 與澄清工作坊決策的對應

### Q1: 核心安全目標對應檢查項

- **CHK001**: 確認 3 個目標（Power, Clock, Memory）已定義
- **CHK013**: 驗證這 3 個目標在需求中具體化
- **CHK035**: 確認為每個目標定義了故障情境

### Q2: HW/SW 分配對應檢查項

- **CHK009-CHK010**: 驗證 HW 檢測 + SW 管理的分配完整性
- **CHK023-CHK025**: 驗證 HW/SW 分配的一致性和介面定義
- **CHK043-CHK044**: 驗證時序指標支持 HW (µs) 和 SW (ms) 分界

### Q3: 驗證覆蓋率對應檢查項

- **CHK016-CHK018**: 驗證 SC/BC/DC 指標明確定義
- **CHK032-CHK033**: 驗證覆蓋率驗收標準和測試方法
- **CHK051**: 驗證代碼品質指標（MISRA C）

### Q4: ASIL 降級對應檢查項

- **CHK020-CHK022**: 驗證 ASIL 層級繼承的一致性
- **CHK024**: 驗證 HW 故障檢測 (DC>90%) 的定義支持降級論證

---

## 關鍵度量指標

### 通過率目標

| 類別 | 目標通過率 | 備註 |
|------|-----------|------|
| 完整性 (CHK001-010) | ≥ 95% | 5 項失敗可接受 |
| 清晰度 (CHK011-019) | ≥ 90% | 最多 2 項失敗 |
| 一致性 (CHK020-027) | = 100% | 不允許矛盾 |
| 驗收標準 (CHK028-034) | ≥ 90% | 最多 1 項失敗 |
| 情境覆蓋 (CHK035-040) | ≥ 85% | 5 項失敗可接受 |

### 整體目標

- **目標**: 總通過率 ≥ 90%（47/52 項）
- **警告**: 通過率 80-90%（需改進）
- **失敗**: 通過率 < 80%（需重新工作）

---

## 常見問題

### Q1: 「定義」和「明確」的區別？

- **定義**: 需求文字中存在該概念的陳述
- **明確**: 陳述清晰、無歧義、可客觀判定

例：
```
✓ 定義但不明確: "系統應快速檢測故障"
✓ 定義且明確: "系統應在 < 1μs 內檢測到 VDD 低壓"
```

### Q2: 為什麼 CHK020-CHK022 要求 100% 通過率？

因為 ASIL 級別矛盾會導致**安全等級混亂**，必須絕對一致。

### Q3: 檢查項目太多，如何快速檢查？

使用 **分階段檢查策略**：
1. **第 1 階**: 只檢查 Critical 項（CHK001-010, CHK023-025）→ 15 項
2. **第 2 階**: 加入 High 項（CHK011-019, CHK028-034）→ 23 項  
3. **第 3 階**: 完整檢查（全 52 項）

建議先完成第 1 階（需 15 分鐘）。

---

## 簽核

| 角色 | 簽名 | 日期 |
|------|------|------|
| 檢查者 (QA/規格工程師) | _________ | _____ |
| 規格擁有者 (系統工程師) | _________ | _____ |
| 技術領導 | _________ | _____ |

---

**End of Specification Requirements Quality Checklist**
